{% load filter %}
{% for part in parts %}
    <part id="{{part.id}}">
    {% if not part.context_data and not part_context_data.show_if_state_program_type_in %}
        <h2>Part {{forloop.counter}}: {{part.title}}</h2>
        <p class="part_text">{{part.text}}</p>
        {% include "reports/questions.html" with questions=part.questions state=state %}
    {% else %}
        {% comment %} If a 4th program type is added then below needs to be updated to include .2 {% endcomment %}
        {% if program_type == part.context_data.show_if_state_program_type_in.0 or program_type == part.context_data.show_if_state_program_type_in.1%}
            <h2>Part {{forloop.counter}}: {{part.title}}</h2>
            <p class="part_text">{{part.text}}</p>
            {% include "reports/questions.html" with questions=part.questions state=state %}
        {% elif not program_type in part.context_data.show_if_state_program_type_in %}
            <p class="skip">{{part.context_data.skip_text}}</p>
            <h2>Part {{forloop.counter}}: {{part.title}}</h2>
            <p class="part_text">{{part.text}}</p>
            {% include "reports/questions.html" with questions=part.questions state=state %}
        {% endif %}
    {% endif %}
    </part>
{% endfor %}

